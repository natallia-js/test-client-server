{"version":3,"sources":["hooks/http.hook.js","components/ServerMessBlock/index.js","components/App/index.js","index.js"],"names":["HttpError","message","additErrArr","name","errors","Error","ServerMessBlock","useState","tData","setTData","loadDataErr","setLoadDataErr","request","loading","setLoading","error","setError","useCallback","url","a","method","body","headers","JSON","stringify","fetch","response","json","data","ok","clearError","useHttp","lang","photoLink","newCountryForm","setNewCountryForm","saveDataRes","setSaveDataRes","saveDataErr","setSaveDataErr","useEffect","then","res","catch","e","changeLangFieldHandler","event","target","value","className","src","alt","placeholder","type","id","onChange","htmlFor","onClick","msg","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"iSAGMA,E,kDACJ,WAAYC,GAA8B,IAAD,EAApBC,EAAoB,uDAAN,KAAM,4BACvC,cAAMD,IACDE,KAAO,YACZ,EAAKC,OAASF,EAHyB,E,sBADnBG,Q,eCEXC,EAAkB,WAAO,IAAD,EACTC,mBAAS,MADA,mBAC5BC,EAD4B,KACrBC,EADqB,OAEGF,mBAAS,MAFZ,mBAE5BG,EAF4B,KAEfC,EAFe,KAI3BC,EDSa,WAAO,IAAD,EACGL,oBAAS,GADZ,mBACpBM,EADoB,KACXC,EADW,OAEDP,mBAAS,MAFR,mBAEpBQ,EAFoB,KAEbC,EAFa,KAyC3B,MAAO,CAAEH,UAASD,QAjCFK,sBAAW,uCAAC,WAAOC,GAAP,mCAAAC,EAAA,6DAAYC,EAAZ,+BAAqB,MAAOC,EAA5B,+BAAmC,KAAMC,EAAzC,+BAAmD,GAC7ER,GAAW,GADe,SAIpBO,IACFA,EAAOE,KAAKC,UAAUH,GACtBC,EAAQ,gBAAkB,oBANJ,SASDG,MAAMP,EAAK,CAAEE,SAAQC,OAAMC,YAT1B,cASlBI,EATkB,iBAULA,EAASC,OAVJ,WAUlBC,EAVkB,OAYnBF,EAASG,GAZU,uBAahB,IAAI7B,EAAU4B,EAAK3B,SAAW,iGAAuB2B,EAAKxB,QAb1C,eAgBxBU,GAAW,GAhBa,kBAkBjBc,GAlBiB,wCAoBxBd,GAAW,GACXE,EAAS,KAAEf,SArBa,+DAAD,sDAwBxB,IASwBc,QAAOe,WAHfb,uBAAY,kBAAMD,EAAS,QAAO,KC/CjCe,GAAZnB,QAJ2B,EAMSL,mBAAS,CACnDyB,KAAM,GACN7B,KAAM,GACN8B,UAAW,KATsB,mBAM5BC,EAN4B,KAMZC,EANY,OAWG5B,mBAAS,MAXZ,mBAW5B6B,EAX4B,KAWfC,EAXe,OAYG9B,mBAAS,MAZZ,mBAY5B+B,EAZ4B,KAYfC,EAZe,KAcnCC,qBAAU,WACR5B,EAAQ,iBAAkB,MAAO,MAC9B6B,MAAK,SAAAC,GACJjC,EAASiC,GACT/B,EAAe,SAEhBgC,OAAM,SAAAC,GACLnC,EAAS,MACTE,EAAeiC,EAAE3C,cAEpB,IAGH,IAAM4C,EAAyB,SAACC,GAC9BX,EAAkB,2BAAKD,GAAN,kBAAuBY,EAAMC,OAAO5C,KAAO2C,EAAMC,OAAOC,UAmB3E,OACE,sBAAKC,UAAU,YAAf,UACE,qBAAKC,IAAI,sBAAsBC,IAAI,QACnC,8BAAM3C,GAAgBE,IACtB,gCACE,uBACE0C,YAAY,sEACZC,KAAK,OACLC,GAAG,OACHC,SAAUV,IAEZ,uBAAOI,UAAU,SAASO,QAAQ,OAAlC,yCAEF,gCACE,uBACEJ,YAAY,mIACZC,KAAK,OACLC,GAAG,OACHC,SAAUV,IAEZ,uBAAOI,UAAU,SAASO,QAAQ,OAAlC,sGAEF,gCACE,uBACEJ,YAAY,wHACZC,KAAK,OACLC,GAAG,YACHC,SAAUV,IAEZ,uBAAOI,UAAU,SAASO,QAAQ,YAAlC,2FAEF,wBACEC,QA/CW,WACflB,EAAe,MACfF,EAAe,MAEfzB,EAAQ,uBAAwB,OAAQsB,GACrCO,MAAK,SAACC,GACLL,EAAeK,MAEhBC,OAAM,SAACC,GACNL,EAAeK,EAAEc,SAqCnB,oEAKA,8BAAMtB,IACN,8BAAME,Q,MCpFG,SAASqB,IACtB,OACE,qCACE,iDAGA,cAAC,EAAD,OCNNC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAGFC,SAASC,eAAe,W","file":"static/js/main.2e74fe30.chunk.js","sourcesContent":["import { useState, useCallback } from 'react';\n\n\nclass HttpError extends Error {\n  constructor(message, additErrArr = null) {\n    super(message);\n    this.name = 'HttpError';\n    this.errors = additErrArr;\n  }\n}\n\n\nexport { HttpError };\n\n\n/**\n * Пользовательский хук для выполнения http-запросов на сервер\n */\nexport const useHttp = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n\n  /**\n   *\n   */\n  const request = useCallback(async (url, method = 'GET', body = null, headers = {}) => {\n    setLoading(true);\n\n    try {\n      if (body) {\n        body = JSON.stringify(body);\n        headers['Content-Type'] = 'application/json';\n      }\n\n      const response = await fetch(url, { method, body, headers });\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new HttpError(data.message || 'Что-то пошло не так', data.errors);\n      }\n\n      setLoading(false);\n\n      return data;\n    } catch (e) {\n      setLoading(false);\n      setError(e.message);\n      throw e;\n    }\n  }, []);\n\n\n  /**\n   *\n   */\n  const clearError = useCallback(() => setError(null), []);\n\n\n  return { loading, request, error, clearError };\n}\n","import React, { useEffect, useState } from 'react';\nimport { useHttp } from '../../hooks/http.hook';\n\nimport './index.css';\n\nexport const ServerMessBlock = () => {\n  const [tData, setTData] = useState(null);\n  const [loadDataErr, setLoadDataErr] = useState(null);\n\n  const { request } = useHttp();\n\n  const [newCountryForm, setNewCountryForm] = useState({\n    lang: '',\n    name: '',\n    photoLink: ''\n  });\n  const [saveDataRes, setSaveDataRes] = useState(null);\n  const [saveDataErr, setSaveDataErr] = useState(null);\n\n  useEffect(() => {\n    request('/api/data/info', 'GET', null)\n      .then(res => {\n        setTData(res);\n        setLoadDataErr(null);\n      })\n      .catch(e => {\n        setTData(null);\n        setLoadDataErr(e.message);\n      });\n  }, []);\n\n\n  const changeLangFieldHandler = (event) => {\n    setNewCountryForm({ ...newCountryForm, [event.target.name]: event.target.value });\n  };\n\n\n  const saveData = () => {\n    setSaveDataErr(null);\n    setSaveDataRes(null);\n\n    request('/api/data/addCountry', 'POST', newCountryForm)\n      .then((res) => {\n        setSaveDataRes(res);\n      })\n      .catch((e) => {\n        setSaveDataErr(e.msg);\n      });\n  };\n\n\n\n  return (\n    <div className=\"mainBlock\">\n      <img src=\"/images/logo192.png\" alt=\"img\"></img>\n      <div>{tData ? tData : loadDataErr}</div>\n      <div>\n        <input\n          placeholder=\"Введите язык\"\n          type=\"text\"\n          id=\"lang\"\n          onChange={changeLangFieldHandler}\n        />\n        <label className=\"active\" htmlFor=\"lang\">Язык</label>\n      </div>\n      <div>\n        <input\n          placeholder=\"Введите название страны\"\n          type=\"text\"\n          id=\"name\"\n          onChange={changeLangFieldHandler}\n        />\n        <label className=\"active\" htmlFor=\"name\">Название страны</label>\n      </div>\n      <div>\n        <input\n          placeholder=\"Введите ссылку на фото\"\n          type=\"text\"\n          id=\"photoLink\"\n          onChange={changeLangFieldHandler}\n        />\n        <label className=\"active\" htmlFor=\"photoLink\">Ссылка на фото</label>\n      </div>\n      <button\n        onClick={saveData}\n      >\n        Сохранить\n      </button>\n      <div>{saveDataRes}</div>\n      <div>{saveDataErr}</div>\n    </div>\n  )\n};\n","import React from 'react';\nimport { ServerMessBlock } from '../ServerMessBlock';\n\nimport './index.css';\n\nexport default function App() {\n  return (\n    <>\n      <h1>\n        Hello, World!!!\n      </h1>\n      <ServerMessBlock />\n    </>\n  )\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n  ,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}